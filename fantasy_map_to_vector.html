<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>My Blog</title>
  <link rel="stylesheet" type="text/css" href="main.css">
  <style>
    img {
      max-width: 100%;
      height: auto;
    }
  </style>
</head>
  
  <body>
    <header>
      <h3>Elling's GIS Blog</h3>
      <nav>
        <ul>
          <li><a href="index.html">Back to main page:</a></li>
        </ul>
      </nav>
    </header>
    <main>
      <article>
        <header>
          <h2>Fantsy Map to a vector polygon</h2>
          <p>Published on March 6st, 2023</p>
        </header>
        <section>
          <p>
          In the table top game Dungeons & Dragons I have made a fantasy map for my home-made world I have created. This map is 
          however a .jpg image I have made in a none GIS software. I have recently wondered if I should import the map into QGIS.
          The map s at a pretty large scale and at a fine detail so instead of having to manually recreate it with manually placing vertex's,
          I wanted to find a easier method.
          </p>          
          <img src="images/fantasy_map_to_vector/kaldonia.jpg" alt="kaldonia">
          <i>My fantasy D&D map</i>
          <p>
          I used a custom plugin in QGIS ('Freehand raster georeference') to re-scale the image based on the hex grid scale I have on the map.
          As each grid is about 39km I used the CRS WGS 1984 Mercator and placed the map at equator since the map originally was not created
          without considering any CRS.
          </p>
          <br>               
          <h2>Creating a NDWI of a .jpg image</h2>
          <p>
          After importing the raster image in the correct scale I wanted to create a vector polygon of the landmass of my continent.
          Using knowledge from remote sensing on how to calculate a NDWI (Normalized Difference Water Index) calulated as: (G-NIR)/(G+NIR).
          However my map is not a landsat 7 or 8 raster image with a NIR band, but the spectral signatures is much simpler on a image. I ended
          up adapting the formula to make the colour blue as dark as possible so it would be more easy to isolate water and none water bodies at 
          a later point. The formula I ended up using in raster calculator was:
          ((Red + Green) - Blue) / ((Red + Green) + Blue)
          </p>
          <br>
          <p>This is the formula used in raster calculator:</p>
            <div style="background-color: #333333; text-align: center; padding: 10px;">
          <p style="font-size: 18px; font-weight: bold;">((Red + Green) - Blue) / ((Red + Green) + Blue)</p>
            </div>
          </p>
           <br>
          <img src="images/fantasy_map_to_vector/NDWI_kaldonia.png" alt="NDWI">
          <i>This is the "NDWI" I created of my fantasy map</i>
          <p>
           <br>
          <p>
           <h2>NDWI to vector data</h2>
           After creating the NDWI I want to have a simple dissolved landuse polygons of shapes which are either classified as water bodies
           or not water bodies. To do this I first needed to classify the raster layer as a binary 0 or 1 indicating it being water or not water.
           to do this i first checked different values of different pixels of water features. Then I opened the raster calculator and
           and put in the formula: <b>NDWI@1 > 0.3</b>. The result of this looked aproximatly as I wanted it to look, but with a lot of noise.
           due to the limited information of a .jpg image compared to a satelite image and wide range of colours used in my map some noise is 
           almost impossible to prevent.
          </p>
          <img src="images/fantasy_map_to_vector/NDWI_classified.png" alt="classified">
          <i>The classified raster image of the NDWI</i>
          </p> 
          <br>
          <p>
           The next step is to create polygon out of the classified NDWI raster. To do this I could use the "Polygonize (Raster to Vector)" tool
           in QGIS. Using symbology I quickly classified the 0 and 1 on the water bodies as blue and light parchment to view the result. The output given the initial image looks pretty good. It has a lot of artifacts from the raster noise which will
           almost be impossible to not have to clean manually since there is a lot of labels with blue text or features with blue colour.
           However doing some vector cleaning and editing from this output compared to having to having to manually draw this polygon is still 
           a huge time saver.
          </p>
          <img src="images/fantasy_map_to_vector/NDWI_vector.png" alt="NDWI_vector">
          <i>The vector result from the process</i>    
          <p>
           <br>
          In the end this was a fun small project, and perhaps in the future I will return to it and clean up the polygon, 
          and add more features such as creating a DEM (Digital Elevation Model). But for anyone who have a image file they consider
          to import into GIS to work with as vector data then I hope this can motivate you to give it a try.
          <p>
        </section>
      </article>
    </main>
    <footer>
     <p>&copy; 2023 My Blog Name</p>
     <a href="index.html">Return to the main site</a>
    </footer>
  </body>
</html>

